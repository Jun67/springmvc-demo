<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bailiban.mybatis.mapper.UserMapper">
    <select id="selectUser" resultType="User" parameterType="int">
        select * from user where id = #{id}
    </select>
    <select id="selectUser4" resultType="User">
        select * from user where id = #{id}
    </select>
    <select id="selectAllUser" resultType="User">
        select * from user;
    </select>
    <select id="selectUserByName" resultType="User" parameterType="String">
        select * from user where name=#{name};
    </select>
    <select id="selectName" resultType="string">
        select name from user where id=#{id}
    </select>
    <insert id="insertUser" useGeneratedKeys="true" keyProperty="id">
        insert into user(name) values (#{name})
    </insert>
    <insert id="insertUsers" keyProperty="id" useGeneratedKeys="true">
        insert into user(name) values
        <foreach collection="list" item="item" separator=",">
            (#{item.name})
        </foreach>
    </insert>
    <sql id="t">
        ${table}
    </sql>
    <sql id="field">
        ${field}
    </sql>
    <sql id="where">
        where id=#{id}
    </sql>
    <select id="selectUser5" resultType="User">
        select <include refid="field"><property name="field" value="id, name"/></include>
        from
        <include refid="t"><property name="table" value="user"/></include>
        <include refid="where"/>
    </select>
    <select id="selectUserByIDAndName" resultType="User">
        select * from user where id=#{id} and name=#{name}
    </select>
    <resultMap id="u1" type="User">
        <constructor>
            <idArg column="id" name="id" />
            <arg column="name"  name="name" />
        </constructor>
    </resultMap>
    <resultMap id="u2" type="User">
        <id column="id" property="id"/>
        <result column="name"   property="name" />
    </resultMap>
    <select id="selectUser11" resultMap="u1">
        select * from user where id = #{id}
    </select>
    <select id="selectUser12" resultMap="u2">
        select * from user where id = #{id}
    </select>
</mapper>